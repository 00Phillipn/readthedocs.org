require=function t(e,n,r){function o(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[a]={exports:{}};e[a][0].call(s.exports,function(t){var n=e[a][1][t];return o(n?n:t)},s,s.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){(function(){var t,e,n,r,o,i,a,u,c,l,s,p,h,d,f,v,m,g,y,_,b,w,C,k,x=[].slice,T=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=window.jQuery||window.Zepto||window.$,t.payment={},t.payment.fn={},t.fn.payment=function(){var e,n;return n=arguments[0],e=2<=arguments.length?x.call(arguments,1):[],t.payment.fn[n].apply(this,e)},o=/(\d{1,4})/g,t.payment.cards=r=[{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:o,length:[16],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5(018|0[23]|[68])|6(39|7))/,format:o,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",pattern:/^600/,format:o,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",pattern:/^5019/,format:o,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:o,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^(5[1-5]|2[2-7])/,format:o,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",pattern:/^3[0689]/,format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^6([045]|22)/,format:o,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^(62|88)/,format:o,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",pattern:/^35/,format:o,length:[16],cvcLength:[3],luhn:!0}],e=function(t){var e,n,o;for(t=(t+"").replace(/\D/g,""),n=0,o=r.length;o>n;n++)if(e=r[n],e.pattern.test(t))return e},n=function(t){var e,n,o;for(n=0,o=r.length;o>n;n++)if(e=r[n],e.type===t)return e},h=function(t){var e,n,r,o,i,a;for(r=!0,o=0,n=(t+"").split("").reverse(),i=0,a=n.length;a>i;i++)e=n[i],e=parseInt(e,10),(r=!r)&&(e*=2),e>9&&(e-=9),o+=e;return o%10===0},p=function(t){var e;return null!=t.prop("selectionStart")&&t.prop("selectionStart")!==t.prop("selectionEnd")?!0:null!=("undefined"!=typeof document&&null!==document&&null!=(e=document.selection)?e.createRange:void 0)&&document.selection.createRange().text?!0:!1},C=function(t,e){var n,r,o;try{n=e.prop("selectionStart")}catch(i){r=i,n=null}return o=e.val(),e.val(t),null!==n&&e.is(":focus")?(n===o.length&&(n=t.length),e.prop("selectionStart",n),e.prop("selectionEnd",n)):void 0},g=function(t){var e,n,r,o,i,a,u,c;for(null==t&&(t=""),r="０１２３４５６７８９",o="0123456789",a="",n=t.split(""),u=0,c=n.length;c>u;u++)e=n[u],i=r.indexOf(e),i>-1&&(e=o[i]),a+=e;return a},m=function(e){return setTimeout(function(){var n,r;return n=t(e.currentTarget),r=n.val(),r=g(r),r=r.replace(/\D/g,""),C(r,n)})},f=function(e){return setTimeout(function(){var n,r;return n=t(e.currentTarget),r=n.val(),r=g(r),r=t.payment.formatCardNumber(r),C(r,n)})},u=function(n){var r,o,i,a,u,c,l;return i=String.fromCharCode(n.which),!/^\d+$/.test(i)||(r=t(n.currentTarget),l=r.val(),o=e(l+i),a=(l.replace(/\D/g,"")+i).length,c=16,o&&(c=o.length[o.length.length-1]),a>=c||null!=r.prop("selectionStart")&&r.prop("selectionStart")!==l.length)?void 0:(u=o&&"amex"===o.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,u.test(l)?(n.preventDefault(),setTimeout(function(){return r.val(l+" "+i)})):u.test(l+i)?(n.preventDefault(),setTimeout(function(){return r.val(l+i+" ")})):void 0)},i=function(e){var n,r;return n=t(e.currentTarget),r=n.val(),8!==e.which||null!=n.prop("selectionStart")&&n.prop("selectionStart")!==r.length?void 0:/\d\s$/.test(r)?(e.preventDefault(),setTimeout(function(){return n.val(r.replace(/\d\s$/,""))})):/\s\d?$/.test(r)?(e.preventDefault(),setTimeout(function(){return n.val(r.replace(/\d$/,""))})):void 0},v=function(e){return setTimeout(function(){var n,r;return n=t(e.currentTarget),r=n.val(),r=g(r),r=t.payment.formatExpiry(r),C(r,n)})},c=function(e){var n,r,o;return r=String.fromCharCode(e.which),/^\d+$/.test(r)?(n=t(e.currentTarget),o=n.val()+r,/^\d$/.test(o)&&"0"!==o&&"1"!==o?(e.preventDefault(),setTimeout(function(){return n.val("0"+o+" / ")})):/^\d\d$/.test(o)?(e.preventDefault(),setTimeout(function(){return n.val(""+o+" / ")})):void 0):void 0},l=function(e){var n,r,o;return r=String.fromCharCode(e.which),/^\d+$/.test(r)?(n=t(e.currentTarget),o=n.val(),/^\d\d$/.test(o)?n.val(""+o+" / "):void 0):void 0},s=function(e){var n,r,o;return o=String.fromCharCode(e.which),"/"===o||" "===o?(n=t(e.currentTarget),r=n.val(),/^\d$/.test(r)&&"0"!==r?n.val("0"+r+" / "):void 0):void 0},a=function(e){var n,r;return n=t(e.currentTarget),r=n.val(),8!==e.which||null!=n.prop("selectionStart")&&n.prop("selectionStart")!==r.length?void 0:/\d\s\/\s$/.test(r)?(e.preventDefault(),setTimeout(function(){return n.val(r.replace(/\d\s\/\s$/,""))})):void 0},d=function(e){return setTimeout(function(){var n,r;return n=t(e.currentTarget),r=n.val(),r=g(r),r=r.replace(/\D/g,"").slice(0,4),C(r,n)})},w=function(t){var e;return t.metaKey||t.ctrlKey?!0:32===t.which?!1:0===t.which?!0:t.which<33?!0:(e=String.fromCharCode(t.which),!!/[\d\s]/.test(e))},_=function(n){var r,o,i,a;return r=t(n.currentTarget),i=String.fromCharCode(n.which),/^\d+$/.test(i)&&!p(r)?(a=(r.val()+i).replace(/\D/g,""),o=e(a),o?a.length<=o.length[o.length.length-1]:a.length<=16):void 0},b=function(e){var n,r,o;return n=t(e.currentTarget),r=String.fromCharCode(e.which),/^\d+$/.test(r)&&!p(n)?(o=n.val()+r,o=o.replace(/\D/g,""),o.length>6?!1:void 0):void 0},y=function(e){var n,r,o;return n=t(e.currentTarget),r=String.fromCharCode(e.which),/^\d+$/.test(r)&&!p(n)?(o=n.val()+r,o.length<=4):void 0},k=function(e){var n,o,i,a,u;return n=t(e.currentTarget),u=n.val(),a=t.payment.cardType(u)||"unknown",n.hasClass(a)?void 0:(o=function(){var t,e,n;for(n=[],t=0,e=r.length;e>t;t++)i=r[t],n.push(i.type);return n}(),n.removeClass("unknown"),n.removeClass(o.join(" ")),n.addClass(a),n.toggleClass("identified","unknown"!==a),n.trigger("payment.cardType",a))},t.payment.fn.formatCardCVC=function(){return this.on("keypress",w),this.on("keypress",y),this.on("paste",d),this.on("change",d),this.on("input",d),this},t.payment.fn.formatCardExpiry=function(){return this.on("keypress",w),this.on("keypress",b),this.on("keypress",c),this.on("keypress",s),this.on("keypress",l),this.on("keydown",a),this.on("change",v),this.on("input",v),this},t.payment.fn.formatCardNumber=function(){return this.on("keypress",w),this.on("keypress",_),this.on("keypress",u),this.on("keydown",i),this.on("keyup",k),this.on("paste",f),this.on("change",f),this.on("input",f),this.on("input",k),this},t.payment.fn.restrictNumeric=function(){return this.on("keypress",w),this.on("paste",m),this.on("change",m),this.on("input",m),this},t.payment.fn.cardExpiryVal=function(){return t.payment.cardExpiryVal(t(this).val())},t.payment.cardExpiryVal=function(t){var e,n,r,o;return o=t.split(/[\s\/]+/,2),e=o[0],r=o[1],2===(null!=r?r.length:void 0)&&/^\d+$/.test(r)&&(n=(new Date).getFullYear(),n=n.toString().slice(0,2),r=n+r),e=parseInt(e,10),r=parseInt(r,10),{month:e,year:r}},t.payment.validateCardNumber=function(t){var n,r;return t=(t+"").replace(/\s+|-/g,""),/^\d+$/.test(t)?(n=e(t),n?(r=t.length,T.call(n.length,r)>=0&&(n.luhn===!1||h(t))):!1):!1},t.payment.validateCardExpiry=function(e,n){var r,o,i;return"object"==typeof e&&"month"in e&&(i=e,e=i.month,n=i.year),e&&n?(e=t.trim(e),n=t.trim(n),/^\d+$/.test(e)&&/^\d+$/.test(n)&&e>=1&&12>=e?(2===n.length&&(n=70>n?"20"+n:"19"+n),4!==n.length?!1:(o=new Date(n,e),r=new Date,o.setMonth(o.getMonth()-1),o.setMonth(o.getMonth()+1,1),o>r)):!1):!1},t.payment.validateCardCVC=function(e,r){var o,i;return e=t.trim(e),/^\d+$/.test(e)?(o=n(r),null!=o?(i=e.length,T.call(o.cvcLength,i)>=0):e.length>=3&&e.length<=4):!1},t.payment.cardType=function(t){var n;return t?(null!=(n=e(t))?n.type:void 0)||null:null},t.payment.formatCardNumber=function(n){var r,o,i,a;return n=n.replace(/\D/g,""),(r=e(n))?(i=r.length[r.length.length-1],n=n.slice(0,i),r.format.global?null!=(a=n.match(r.format))?a.join(" "):void 0:(o=r.format.exec(n),null!=o?(o.shift(),o=t.grep(o,function(t){return t}),o.join(" ")):void 0)):n},t.payment.formatExpiry=function(t){var e,n,r,o;return(n=t.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/))?(e=n[1]||"",r=n[2]||"",o=n[3]||"",o.length>0?r=" / ":" /"===r?(e=e.substring(0,1),r=""):2===e.length||r.length>0?r=" / ":1===e.length&&"0"!==e&&"1"!==e&&(e="0"+e,r=" / "),e+r+o):""}}).call(this)},{}],2:[function(t,e,n){function r(t){var e=this,t=t||{};a.publishableKey=e.stripe_key=t.key,e.form=t.form,e.cc_number=o.observable(null),e.cc_expiry=o.observable(null),e.cc_cvv=o.observable(null),e.error_cc_number=o.observable(null),e.error_cc_expiry=o.observable(null),e.error_cc_cvv=o.observable(null),e.stripe_token=o.observable(null),e.card_digits=o.observable(null),e.is_editing_card=o.observable(!1),e.show_card_form=o.computed(function(){return e.is_editing_card()||!e.card_digits()||e.cc_number()||e.cc_expiry()||e.cc_cvv()}),e.initialize_form(),e.error=o.observable(null),e.process_form=function(){var t=i.payment.cardExpiryVal(e.cc_expiry()),n={number:e.cc_number(),exp_month:t.month,exp_year:t.year,cvc:e.cc_cvv()};return e.error(null),e.error_cc_number(null),e.error_cc_expiry(null),e.error_cc_cvv(null),i.payment.validateCardNumber(n.number)?i.payment.validateCardExpiry(n.exp_month,n.exp_year)?i.payment.validateCardCVC(n.cvc)?void a.createToken(n,function(t,n){200===t?e.submit_form(n.card.last4,n.id):e.error(n.error.message)}):(e.error_cc_cvv("Invalid security code"),!1):(e.error_cc_expiry("Invalid expiration date"),!1):(e.error_cc_number("Invalid card number"),!1)},e.process_full_form=function(){return e.show_card_form()?void e.process_form():!0}}var o=t("knockout"),i=(t("./../../../../../bower_components/jquery.payment/lib/jquery.payment.js"),t("jquery")),a=null;"undefined"!=typeof window&&"undefined"!=typeof window.Stripe&&(a=window.Stripe||{}),o.bindingHandlers.valueInit={init:function(t,e){var n=e();o.isWriteableObservable(n)&&n(t.value)}},r.prototype.submit_form=function(t,e){this.form.find("#id_card_digits").val(t),this.form.find("#id_stripe_token").val(e),this.form.submit()},r.prototype.initialize_form=function(){var t=i("input#id_cc_number"),e=i("input#id_cc_cvv"),n=i("input#id_cc_expiry");t.payment("formatCardNumber"),n.payment("formatCardExpiry"),e.payment("formatCardCVC"),t.trigger("keyup")},r.init=function(t,e){var n=new r(t),e=e||i("#payment-form")[0];return o.applyBindings(n,e),n},e.exports.PaymentView=r},{"./../../../../../bower_components/jquery.payment/lib/jquery.payment.js":1,jquery:"jquery",knockout:"knockout"}],"gold/gold":[function(t,e,n){function r(t){var e=this,t=t||{};e.constructor.call(e,t),e.last_4_digits=i.observable(null)}var o=(t("jquery"),t("readthedocs/payments/static-src/payments/js/base")),i=t("knockout");r.prototype=new o.PaymentView,r.init=function(t,e){var n=new r(t),e=e||$("#payment-form")[0];return i.applyBindings(n,e),n},r.prototype.submit_form=function(t,e){this.form.find("#id_last_4_digits").val(t),this.form.find("#id_stripe_token").val(e),this.form.submit()},e.exports.GoldView=r},{jquery:"jquery",knockout:"knockout","readthedocs/payments/static-src/payments/js/base":2}]},{},[]);